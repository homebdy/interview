넥스트키락(레코드락+갭락)으로 팬텀리드가 발생하지 않는다.

우선 mysqld은 다른 dbms와 다르게 레코드락이 각 레코드에 걸리지 않고 인덱스를 기준으로 락이 걸리게된다.

조건에 해당하는 인덱스 모두에 락을 걸기 때문에 유니크하지않은 인덱스를 통해 검색하는 경우 해당 인덱스를 가진 모든 레코드는 잠긴다.

여기서 갭락은 레코드와 레코드 사이에 아직 존재하지는 않지만 사이에 들어올 모든 레코드들을 잠근다.

넥스트키락은 레코드락으로 해당하는 인덱스를 모두 잠그고, 인덱스 사이도 갭락으로 잠그며 레코드 위아래로 인접한 레코드까지 모두 잠근다.

그렇기